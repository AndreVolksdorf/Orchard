@model GroupEditViewModel
@using SmartPage.Community.Roles.ViewModels;

@{ Layout.Title = T("Edit Role").ToString(); }

@using(Html.BeginFormAntiForgeryPost()) {
    @Html.ValidationSummary();
    <fieldset>
        <legend>@T("Information")</legend>
        <label for="pageTitle">@T("Role Name:")</label>
        @if (Model.Name == "Administrator") { // the one special case
            <input id="Name" class="text" type="text" value="@Model.Name" readonly="readonly" />
            <input class="text" name="Name" type="hidden" value="@Model.Name" />
        }
        else {
            <input id="Name" class="text" name="Name" type="text" value="@Model.Name" />
        }
        <input type="hidden" value="@Model.Id" name="Id" />
    </fieldset>
    <fieldset>
        <legend>@T("Members")</legend>
        <table class="items">
            <colgroup>
                <col id="Col1" />
                <col id="Col2" />
            </colgroup>
            <thead>
                <tr>
                    <th scope="col">@T("UserName")</th>
                    <th scope="col">@T("Role")</th>
                </tr>
            </thead>
            @foreach (var category in Model.GroupUsers)
            {
                <tr>
                    <td>@Model.CurrentUsers.FirstOrDefault(x=> x.Value == @category.UserId).Key</td>
                    <td>
                        <select id="" name="UserId.@category.UserId">
                            @foreach (var role in Model.Roles)
                            {
                                if (category.RoleRecord.Name == role) {
                                    <option selected="selected">@role</option>
                                }
                                else {
                                    <option>@role</option>
                                }
                            }
                        </select>
                    </td>
                </tr>
            }
        </table>
    </fieldset>
    <fieldset>
        <button class="primaryAction" type="submit" name="submit.Save" value="@T("Save")">@T("Save")</button>
        @if (Model.Name != "Administrator") {
        <button type="submit" name="submit.Delete" value="@T("Delete")" itemprop="RemoveUrl">@T("Delete")</button>
        }
    </fieldset>
}